"use strict";angular.module("carctrlApp",["ngCookies","ngResource","ngSanitize","angularFileUpload","ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/"),c.html5Mode(!0)}]),angular.module("carctrlApp").controller("CostumeraddCtrl",["$scope","$http","$location",function(a,b,c){a.costumer={},a.save=function(){a.newCostumerForm.$valid&&b.post("/api/costumers",a.costumer).success(function(){c.path("/costumers")})}}]),angular.module("carctrlApp").config(["$stateProvider",function(a){a.state("costumeradd",{url:"/costumeradd",templateUrl:"app/costumers/costumeradd/costumeradd.html",controller:"CostumeraddCtrl"})}]),angular.module("carctrlApp").controller("CostumersCtrl",["$scope","$http",function(a,b){function c(a,b){return"/api/cmds/"+a+"/"+b}function d(b){for(var c=0;c<a.costumers.length;c++)a.costumers[c].hash===b.hash&&(a.costumers[c]=b)}function e(){b.get("/api/costumers").success(function(b){a.costumers=b})}a.costumers=[],a.update=function(a){b.post(c(a,"update")).success(function(a){d(a)})},a.stop=function(a){b.post(c(a,"stop")).success(function(a){d(a)})},a.start=function(a){b.post(c(a,"start")).success(function(a){d(a)})},e(),setInterval(e,1e4)}]),angular.module("carctrlApp").config(["$stateProvider",function(a){a.state("costumers",{url:"/costumers",templateUrl:"app/costumers/costumers.html",controller:"CostumersCtrl"})}]),angular.module("carctrlApp").controller("MainCtrl",["$scope","$http",function(a,b){a.costumers=[],b.get("/api/costumers").success(function(b){a.costumers=b})}]),angular.module("carctrlApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("carctrlApp").controller("VersionaddCtrl",["$scope","$http","$location","FileUploader",function(a,b,c,d){a.saved=!1;var e=a.uploader=new d({url:"/api/files"});e.onAfterAddingFile=function(){e.uploadAll()},e.onCompleteAll=function(){c.path("/versions")},a.version={descs:[{}]},a.addDesc=function(){a.version.descs.push({desc:"",type:""})},a.removeDesc=function(b){var c=a.version.descs.indexOf(b);a.version.descs.splice(c,1)},a.showDelBtn=function(b){var c=a.version.descs.indexOf(b);return c>0},a.save=function(){a.newDescForm.$valid&&b.post("/api/versions",a.version).success(function(){a.saved=!0})}}]),angular.module("carctrlApp").config(["$stateProvider",function(a){a.state("versionadd",{url:"/versionadd",templateUrl:"app/versions/versionadd/versionadd.html",controller:"VersionaddCtrl"})}]),angular.module("carctrlApp").controller("VersoesCtrl",["$scope","$http",function(a,b){a.getTypes=function(a){for(var b={},c=0;c<a.descs.length;c++)b[a.descs[c].type]="";return Object.keys(b)},b.get("/api/versions").success(function(b){a.versions=b})}]),angular.module("carctrlApp").config(["$stateProvider",function(a){a.state("versoes",{url:"/versions",templateUrl:"app/versions/versions.html",controller:"VersoesCtrl"})}]),angular.module("carctrlApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Clientes",link:"/costumers"},{title:"Versoes",link:"/versions"},{title:"Sair",link:"/sair"}],a.isActive=function(a){return a===b.path()}}]),angular.module("carctrlApp").run(["$templateCache",function(a){a.put("app/costumers/costumeradd/costumeradd.html",'<header class=hero-unit id=banner><div class=container><p class=lead>Novo cliente</p><i class="fa fa-sort-amount-desc" style="font-size: 40px"></i></div></header><div class=container><div class="box box-info page-header"><div class=box-header><h3 class=box-title>Dados do cliente</h3></div><form name=newCostumerForm role=form><div class="box-body table-responsive"><div class=row><div class=col-md-5><div class="alert alert-danger" role=alert ng-show=newDescForm.valid>Informe os campos obrigatórios</div><div class=form-group><label>Nome</label><input ng-class="{\'form-control has-error\': form.version.$invalid}" class=form-control placeholder="Nome do cliente" ng-model=costumer.name required></div><div class=form-group><label>CNPJ</label><input ng-class="{\'form-control has-error\': form.version.$invalid}" class=form-control placeholder="CNPJ do cliente" ng-model=costumer.cnpj required></div><div class=form-group><a type=button class="btn btn-primary btn-sm" ng-click=save()>Salvar</a> <a type=button href=/costumers class="btn btn-danger btn-sm">Cancelar</a></div></div></div></div></form></div></div>'),a.put("app/costumers/costumers.html",'<header class=hero-unit id=banner><div class=container><p class=lead>Lista de clientes</p><i class="fa fa-users" style="font-size: 40px"></i></div></header><div class=container><div class=row><div class="box box-info page-header"><div class=box-header><h3 class=box-title>Clientes ({{costumers.length}})</h3></div><div class="box-body table-responsive"><a type=button href=/costumeradd class="btn btn-primary btn-sm">Novo cliente</a><p><table class=table><thead><tr><th>Cliente</th><th>Versão</th><th>Status</th><th>Última atualização</th><th>Hash</th><th>Admin</th></tr></thead><tbody><tr ng-repeat="cli in costumers"><td>{{cli.name}}</td><td>{{cli.version}}</td><td><i ng-show="cli.status===\'waiting\'" class="glyphicon glyphicon-flash"></i> <i ng-show="cli.status===\'running\' || (cli.status === \'waiting\' && cli.command===\'start\')" class="glyphicon glyphicon-play"></i> <i ng-show="cli.status===\'stoped\' || (cli.status === \'waiting\' && cli.command===\'stop\')" class="glyphicon glyphicon-stop"></i> <i ng-show="cli.status === \'waiting\' && cli.command===\'update\'" class="glyphicon glyphicon-refresh"></i></td><td>{{cli.lastUpdate | date:\'dd/MM/yyyy HH:mm\'}}</td><td>{{cli.hash}}</td><td><a href=# ng-click=start(cli.hash)><i class="glyphicon glyphicon-play"></i></a> <a href=# ng-click=stop(cli.hash)><i class="glyphicon glyphicon-stop"></i></a> <a href=# ng-click=update(cli.hash)><i class="glyphicon glyphicon-refresh"></i></a></td></tr></tbody></table></p></div></div></div></div>'),a.put("app/main/main.html",'<header class=hero-unit id=banner><div class=container><p class=lead>Bem vindo ao controle de versões</p><i class="fa fa-gears" style="font-size: 40px"></i></div></header><div class=container><div class=row><div class=col-lg-12><h1 class=page-header>Clientes:</h1><ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="costumer in costumers"><li><span><a href=# tooltip={{costumer.name}}>{{costumer.name}}</a></span></li></ul></div></div></div>'),a.put("app/versions/versionadd/versionadd.html",'<header class=hero-unit id=banner><div class=container><p class=lead>Nova versão</p><i class="fa fa-sort-amount-desc" style="font-size: 40px"></i></div></header><div class=container><div class="box box-info page-header"><div class=box-header><h3 class=box-title>Detalhes da versão</h3></div><form name=newDescForm role=form><div class="box-body table-responsive"><div class=row><div class=col-md-5><div class="alert alert-danger" role=alert ng-show=newDescForm.valid>Informe os campos obrigatórios</div><div class=form-group><label for=versionInput>Versão</label><input ng-class="{\'form-control has-error\': form.version.$invalid}" class=form-control placeholder="Digite a número da nova versão" id=versionInput ng-model=version.number required></div><div class=form-group><label>Descrição</label><div class=input-group ng-repeat="desc in version.descs" style="margin-bottom: 5px"><div class=input-group-btn><button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false>{{desc.type}} <span class=caret></span></button><ul class=dropdown-menu role=menu><li><a href=# ng-click="desc.type = \'Correção\'">Correção</a></li><li><a href=# ng-click="desc.type = \'Melhoria\'">Melhoria</a></li></ul></div><!-- /btn-group --><input class=form-control ng-model=desc.desc> <span class=input-group-btn><button type=submit class="btn btn-primary" ng-click=addDesc()><i class="fa fa-plus"></i></button></span> <span class=input-group-btn ng-show=showDelBtn(desc)><button type=submit class="btn btn-danger" ng-click=removeDesc(desc)><i class="fa fa-remove"></i></button></span></div><!-- /input-group --></div><div class=form-group><a href=/versionadd class="btn btn-primary btn-sm" ng-click=save()>Salvar</a> <a href=/versions class="btn btn-danger btn-sm">Cancelar</a></div></div></div></div></form><div class=row ng-show=saved><div class=col-md-3>Arquivo <input type=file nv-file-select="" uploader="uploader"><br><div class=progress><div class=progress-bar role=progressbar ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div></div></div></div></div>'),a.put("app/versions/versions.html",'<header class=hero-unit id=banner><div class=container><p class=lead>Lista de versões</p><i class="fa fa-bars" style="font-size: 40px"></i></div></header><div class=container><div class=row><div class="box box-info page-header"><div class=box-header><h3 class=box-title>Versões</h3></div><div class="box-body table-responsive"><a type=button href=/versionadd class="btn btn-primary btn-sm">Nova versão</a><p><table class=table><thead><tr><th>#Versão</th><th>Data</th><th>Tipo</th><th>Descrição</th></tr></thead><tbody><tr ng-repeat="version in versions"><td>{{version.number}}</td><td>{{version.release | date:\'dd/MM/yyyy HH:mm\'}}</td><td><p ng-repeat="type in getTypes(version)"><span ng-class="{\'label label-info\': type == \'Melhoria\', \'label label-danger\': type == \'Correção\'}" style=margin-left:5px>{{type}}</span></p></td><td><p ng-repeat="desc in version.descs"><span><i ng-class="{\'fa fa-check bluecheck\': desc.type == \'Melhoria\', \'fa fa-check redcheck\': desc.type == \'Correção\'}"></i> {{desc.desc}}</span></p></td></tr></tbody></table></p></div></div></div></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle data-toggle=collapse data-target=.navbar-main><span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>C.A.R. Controle</a></div><div class="collapse navbar-collapse navbar-right navbar-main"><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);